<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, viewport-fit=cover" />
  <title>Republik Mancing â€” Liputan & Event Mancing</title>
  <meta name="description" content="Berita, jadwal, video, dan event seputar dunia mancing â€” Republik Mancing." />
  <meta name="theme-color" content="#0b6b4f" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <!-- Favicon Placeholder -->
  <link rel="icon" href="https://i.postimg.cc/43JHzVW8/329314-3ae915ca4c2cedce83b1b12a7addfd9d-22-11-2022-19-45-25.jpg" />
  
  <!-- PWA Manifest Placeholder -->
  <link rel="manifest" id="my-manifest-placeholder">

  <style>
    :root{
      --accent: #0b6b4f;
      --accent-dark: #054e39;
      --muted: #6b7280;
      --card: #ffffff;
      --bg: #f3f4f6;
      --max: 1100px;
      --radius: 12px;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }
    
    *{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
    html {scroll-behavior: smooth;}
    body{margin:0; background:var(--bg); color:#1f2937; line-height:1.5;}
    
    /* === HEADER (Full Width) === */
    header {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 999;
      border-bottom: 1px solid #e5e7eb;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      width: 100%;
    }
    
    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      max-width: var(--max);
      margin: 0 auto;
      padding: 12px 16px; /* Internal padding */
    }

    .brand{display:flex; align-items:center; gap:12px; text-decoration: none; color: inherit;}
    .logo{
      width:42px; height:42px; 
      border-radius:10px; 
      background:linear-gradient(135deg, var(--accent), #2b8f6b);
      display:flex; align-items:center; justify-content:center; 
      overflow: hidden;
      flex-shrink: 0;
    }
    .logo img {width: 100%; height: 100%; object-fit: cover;}
    
    .brand-text h1 {font-size: 18px; font-weight: 800; margin: 0; line-height: 1.2;}
    .brand-text span {font-size: 11px; color: var(--muted); display: block;}

    /* Navigasi Responsif */
    nav {
      display: flex;
      gap: 4px;
    }
    nav a {
      padding: 8px 14px;
      border-radius: 8px;
      text-decoration: none;
      color: var(--muted);
      font-weight: 600;
      font-size: 14px;
      transition: all 0.2s;
    }
    nav a:hover {background: #f3f4f6; color: #111;}
    nav a.active {
      background: var(--accent);
      color: white;
    }

    /* === Layout & Container === */
    .container{
      max-width:var(--max);
      margin:0 auto;
      padding: 16px;
      padding-bottom: 80px;
    }

    /* Grid Layout */
    .layout{
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 24px;
    }

    /* Components */
    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);
      margin-bottom: 16px;
      overflow: hidden;
    }
    
    .btn {
      background: var(--accent);
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      border: none;
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn:hover {background: var(--accent-dark);}
    .btn-sm {padding: 6px 12px; font-size: 12px;}
    .btn-wa {background: #25D366;}
    .btn-wa:hover {background: #1ebc57;}

    /* Hero Section */
    .hero {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
    }
    .main-news img {
      width: 100%;
      height: auto;
      max-height: 400px;
      object-fit: cover;
      border-radius: 8px;
    }
    .headline {font-size: 24px; font-weight: 800; margin: 16px 0 8px; color: #111;}
    .meta {color: var(--muted); font-size: 13px; display: flex; gap: 10px;}
    
    /* News Grid */
    .grid-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 16px;
      margin-top: 16px;
    }
    .news-card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: transform 0.2s;
      display: flex;
      flex-direction: column;
      height: 100%;
      text-decoration: none;
      color: inherit;
    }
    .news-card:hover {transform: translateY(-2px);}
    .news-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    .news-content {padding: 12px; display: flex; flex-direction: column; flex: 1;}
    .news-title {font-weight: 700; margin: 0 0 8px; font-size: 16px;}
    .news-date {font-size: 12px; color: var(--muted); margin-top: auto;}

    /* Tables */
    .table-container {overflow-x: auto;}
    table {width: 100%; border-collapse: collapse; white-space: nowrap;}
    th, td {padding: 12px; text-align: left; border-bottom: 1px solid #eee;}
    th {background: #f9fafb; font-weight: 600; color: var(--muted);}

    /* Event List */
    .event-list {list-style: none; padding: 0; margin: 0;}
    .event-item {
      display: flex; 
      gap: 12px; 
      padding: 12px 0; 
      border-bottom: 1px solid #f0f0f0;
    }
    .event-item:last-child {border-bottom: none;}
    .event-thumb {
      width: 60px; height: 60px; 
      border-radius: 8px; 
      object-fit: cover;
      background: #eee;
    }

    /* Sidebar */
    .sidebar {display: flex; flex-direction: column; gap: 16px;}
    .sticky {position: sticky; top: 90px;}

    /* Topbar */
    .topbar {
      background: var(--accent);
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 13px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
      font-weight: 500;
    }

    /* Install Prompt */
    #install-prompt {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      color: white;
      padding: 12px 20px;
      border-radius: 50px;
      display: none; /* Hidden by default */
      align-items: center;
      gap: 12px;
      z-index: 1000;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      width: 90%;
      max-width: 400px;
      animation: slideUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    @keyframes slideUp {
      from {transform: translate(-50%, 100%); opacity: 0;}
      to {transform: translate(-50%, 0); opacity: 1;}
    }

    /* Share Button */
    .native-share-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #f0f9ff;
      color: #0284c7;
      border: 1px solid #bae6fd;
      padding: 6px 12px;
      border-radius: 6px;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
    }

    /* === Responsive Breakpoints === */
    @media (max-width: 900px){
      .layout {grid-template-columns: 1fr;}
      .sidebar {order: 2;}
      .hero {grid-template-columns: 1fr;}
      
      /* Header Mobile Adjustment */
      .header-inner {
        flex-direction: column;
        align-items: stretch;
        padding-bottom: 0; /* Hemat space bawah */
      }
      
      .brand {
        justify-content: flex-start; /* Logo kiri */
        padding-bottom: 12px;
      }

      /* Navigasi Scroll Horizontal di Mobile */
      nav {
        width: 100%;
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 12px; /* Space untuk scrollbar ghost */
        margin-left: -16px; /* Bleed kiri */
        width: calc(100% + 32px); /* Bleed kanan */
        padding-left: 16px;
        padding-right: 16px;
        
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
      }
      nav::-webkit-scrollbar {display: none;}
      
      nav a {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 13px;
      }
    }
  </style>
</head>
<body>

<!-- Header dipindahkan keluar Container agar Full Width -->
<header>
  <div class="header-inner">
    <a href="#" class="brand">
      <div class="logo">
        <img src="https://i.postimg.cc/43JHzVW8/329314-3ae915ca4c2cedce83b1b12a7addfd9d-22-11-2022-19-45-25.jpg" alt="Logo">
      </div>
      <div class="brand-text">
        <h1>Republik Mancing</h1>
        <span>Liputan â€¢ Event â€¢ Tips â€¢ Video</span>
      </div>
    </a>
    
    <nav>
      <a href="#home" class="active">Home</a>
      <a href="#event">Event</a>
      <a href="#jadwal">Jadwal</a>
      <a href="#koleksi">Koleksi</a>
      <a href="#channel">Video</a>
      <a href="#tentang">Tentang</a>
    </nav>
  </div>
</header>

<div class="container">
  <div class="layout">
    <!-- Main Content -->
    <main>
      <div class="topbar">
        <span class="breaking">ðŸ”¥ Berita Utama: Induk 3.2 kg Naik di Empang Damai</span>
        <span>22 Nov 2025</span>
      </div>

      <section class="hero card" id="home">
        <div class="main-news">
          <img src="https://i.postimg.cc/q71SRqd2/20250530140128-00-06-47-08-Still003.png" alt="Induk di Empang Damai">
          <div style="margin-top:16px">
            <div class="meta">
              <span>Oleh: rm37</span> â€¢ <span>22 Nov 2025</span>
            </div>
            <h2 class="headline">Induk 3,2 Kg Naik di Empang Damai â€” Lomba Seru & Tangkapan Spektakuler</h2>
            <p style="color:var(--muted); line-height:1.6;">Laporan lengkap tentang lomba mancing di Empang Damai kali ini menghadirkan suasana yang sangat meriah dengan kehadiran ratusan pemancing dari berbagai daerah.</p>
            
            <div style="margin-top:16px; display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:12px;">
              <button id="native-share" class="native-share-btn">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8m-4-6l-4-4-4 4m4-4v13"></path></svg>
                Bagikan Berita
              </button>
              
              <!-- Fallback social icons if API not supported (handled by JS) -->
              <div class="share-fallback" style="display:flex; gap:8px;">
                <a href="#" id="share-wa"><img src="https://i.postimg.cc/gkW6vPX4/4.png" width="24" height="24"></a>
                <a href="#" id="share-fb"><img src="https://i.postimg.cc/MGTBvbc9/1.png" width="24" height="24"></a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Grid Articles -->
      <div class="grid-cards">
        <a href="#" class="news-card">
          <img src="https://i.postimg.cc/VkSQ0qKZ/Screenshot-20250810-145241-Facebook.jpg" alt="Teknik">
          <div class="news-content">
            <h4 class="news-title">Teknik Dasar Mancing Babon â€” Hasilkan Strike Beruntun</h4>
            <div class="news-date">20 Nov 2025</div>
          </div>
        </a>
        <a href="#" class="news-card">
          <img src="https://i.postimg.cc/dtVWh4Dh/20250807110229-MTS-00-00-51-24-Still001.png" alt="Juara">
          <div class="news-content">
            <h4 class="news-title">Lomba Ikan Mas â€” Rekap & Juara</h4>
            <div class="news-date">15 Nov 2025</div>
          </div>
        </a>
        <a href="#" class="news-card">
          <img src="https://i.postimg.cc/hvrzxWtW/20250807110229-MTS-00-00-51-24-Still001.png" alt="Jadwal">
          <div class="news-content">
            <h4 class="news-title">Jadwal Mingguan Pemancingan Terpopuler</h4>
            <div class="news-date">10 Nov 2025</div>
          </div>
        </a>
      </div>

      <!-- Jadwal Section -->
      <section id="jadwal" class="card" style="margin-top:24px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
          <h3 style="margin:0; font-size:18px;">ðŸ“… Jadwal Mancing</h3>
          <a href="#" style="color:var(--accent); font-size:13px; font-weight:600; text-decoration:none;">Lihat Semua</a>
        </div>
        <div class="table-container">
          <table>
            <thead><tr><th>Tanggal</th><th>Lokasi</th><th>Event</th><th>Biaya</th></tr></thead>
            <tbody>
              <tr><td>28 Nov</td><td>Empang Damai</td><td>Lomba Ikan Mas</td><td>150K</td></tr>
              <tr><td>5 Des</td><td>Kolam Ratu</td><td>Open Day Mini</td><td>50K</td></tr>
              <tr><td>12 Des</td><td>Telaga Silet</td><td>Night Strike</td><td>100K</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Koleksi Foto -->
      <section id="koleksi" style="margin-top:24px;">
        <h3 style="font-size:18px; margin-bottom:12px;">ðŸ“¸ Galeri Strike</h3>
        <div class="grid-cards">
          <div class="card" style="padding:0"><img src="https://i.postimg.cc/VNMnwysh/Whats-App-Image-2025-10-30-at-18-56-32.jpg" style="width:100%; height:150px; object-fit:cover"></div>
          <div class="card" style="padding:0"><img src="https://i.postimg.cc/dtVWh4Dh/20250807110229-MTS-00-00-51-24-Still001.png" style="width:100%; height:150px; object-fit:cover"></div>
        </div>
      </section>

      <!-- Tentang -->
      <section id="tentang" class="card" style="margin-top:24px; text-align:center; padding:32px 16px;">
        <h2 style="margin-top:0;">Tentang Kami</h2>
        <p style="color:var(--muted); max-width:600px; margin:0 auto 20px;">
          <strong>Republik Mancing</strong> adalah portal media pemancingan terdepan. Kami hadir untuk memberikan berita akurat, konten aktual, dan hiburan seputar dunia mancing.
        </p>
        <a href="https://wa.me/6281234567890" class="btn btn-wa">Hubungi via WhatsApp</a>
      </section>
    </main>

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sticky">
        
        <!-- Event List Widget -->
        <div class="card" id="event">
          <h4 style="margin:0 0 12px; font-weight:800;">Event Mendatang</h4>
          <ul class="event-list">
            <li class="event-item">
              <img src="https://i.postimg.cc/vmrWRHV8/Whats-App-Image-2025-10-30-at-18-56-32.jpg" class="event-thumb">
              <div>
                <div style="font-size:13px; font-weight:700;">Lomba Ikan Mas</div>
                <div style="font-size:12px; color:var(--muted);">28 Nov â€¢ Empang Damai</div>
                <a href="https://wa.me/628123456789" class="btn btn-sm btn-wa" style="margin-top:4px;">Daftar</a>
              </div>
            </li>
            <li class="event-item">
              <img src="https://i.postimg.cc/13sSvHwT/20250712135030-MTS-00-00-07-12-Still001.png" class="event-thumb">
              <div>
                <div style="font-size:13px; font-weight:700;">Open Day Mini</div>
                <div style="font-size:12px; color:var(--muted);">5 Des â€¢ Kolam Ratu</div>
                <a href="https://wa.me/628123456789" class="btn btn-sm btn-wa" style="margin-top:4px;">Daftar</a>
              </div>
            </li>
          </ul>
        </div>

        <!-- Iklan -->
        <div class="card" style="background:#fafafa; border:2px dashed #e5e7eb; text-align:center;">
          <div style="font-weight:700; color:var(--accent); margin-bottom:8px;">Slot Iklan Tersedia</div>
          <p style="font-size:12px; color:var(--muted);">Pasang banner produk pancing Anda disini.</p>
          <a href="#" class="btn btn-sm">Hubungi Admin</a>
        </div>

        <!-- Video Highlight -->
        <div class="card" id="channel">
          <h4 style="margin:0 0 12px;">Highlight Video</h4>
          <div style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:8px;">
            <iframe style="position:absolute; top:0; left:0; width:100%; height:100%;" src="https://www.youtube.com/embed/YM9aFlzXr1U" frameborder="0" allowfullscreen></iframe>
          </div>
        </div>
        
        <!-- Socials -->
        <div class="card" style="display:flex; justify-content:center; gap:16px;">
          <a href="https://www.facebook.com/robben.bralink" target="_blank" title="Facebook"><img src="https://i.postimg.cc/MGTBvbc9/1.png" width="32" alt="Facebook"></a>
          <a href="https://www.instagram.com/republikmancing37/" target="_blank" title="Instagram"><img src="https://i.postimg.cc/6qs4jkMH/2.png" width="32" alt="Instagram"></a>
          <a href="https://www.youtube.com/c/RepublikMancing37" target="_blank" title="YouTube"><img src="https://i.postimg.cc/LXZF4wmd/7.png" width="32" alt="YouTube"></a>
          <a href="https://www.tiktok.com/@republikmancing?lang=id-ID" target="_blank" title="TikTok"><img src="https://i.postimg.cc/02sJpqMr/3.png" width="32" alt="TikTok"></a>
        </div>

      </div>
    </aside>
  </div>

  <footer style="text-align:center; color:var(--muted); font-size:13px; margin-top:40px;">
    &copy; 2026 Republik Mancing. PWA Enabled.
  </footer>
</div>

<!-- Install App Prompt UI -->
<div id="install-prompt">
  <div style="flex:1">
    <div style="font-weight:bold; font-size:14px;">Install Republik Mancing</div>
    <div style="font-size:12px; color:#ccc;">Akses cepat & baca berita offline.</div>
  </div>
  <button id="install-btn" class="btn btn-sm" style="background:white; color:#222;">Install</button>
  <button id="close-install" style="background:none; border:none; color:#888; font-size:18px; cursor:pointer;">&times;</button>
</div>

<script>
  // 1. DYNAMIC MANIFEST GENERATION (Agar bisa 1 file)
  const manifest = {
    "name": "Republik Mancing",
    "short_name": "Rep. Mancing",
    "start_url": ".",
    "display": "standalone",
    "background_color": "#f3f4f6",
    "theme_color": "#0b6b4f",
    "icons": [
      {
        "src": "https://i.postimg.cc/43JHzVW8/329314-3ae915ca4c2cedce83b1b12a7addfd9d-22-11-2022-19-45-25.jpg",
        "sizes": "192x192",
        "type": "image/jpeg"
      },
      {
        "src": "https://i.postimg.cc/43JHzVW8/329314-3ae915ca4c2cedce83b1b12a7addfd9d-22-11-2022-19-45-25.jpg",
        "sizes": "512x512",
        "type": "image/jpeg"
      }
    ]
  };
  const stringManifest = JSON.stringify(manifest);
  const blobManifest = new Blob([stringManifest], {type: 'application/json'});
  const manifestURL = URL.createObjectURL(blobManifest);
  document.getElementById('my-manifest-placeholder').setAttribute('href', manifestURL);

  // 2. SERVICE WORKER REGISTRATION (Blob Method for Single File)
  if ('serviceWorker' in navigator) {
    const swCode = `
      const CACHE_NAME = 'rm-cache-v1';
      // Asset dasar yang mau di cache
      const urlsToCache = [
        './',
        'https://i.postimg.cc/43JHzVW8/329314-3ae915ca4c2cedce83b1b12a7addfd9d-22-11-2022-19-45-25.jpg'
      ];

      self.addEventListener('install', event => {
        self.skipWaiting(); // Paksa aktif segera
        event.waitUntil(
          caches.open(CACHE_NAME).then(cache => {
            return cache.addAll(urlsToCache).catch(err => console.log('Cache error', err));
          })
        );
      });

      self.addEventListener('activate', event => {
        event.waitUntil(self.clients.claim()); // Ambil alih kontrol segera
      });

      self.addEventListener('fetch', event => {
        // Strategi: Network First, Fallback ke Cache (agar berita selalu update)
        event.respondWith(
          fetch(event.request).catch(() => {
            return caches.match(event.request);
          })
        );
      });
    `;
    
    const blobSW = new Blob([swCode], {type: 'text/javascript'});
    const swURL = URL.createObjectURL(blobSW);

    navigator.serviceWorker.register(swURL)
      .then(reg => console.log('Service Worker registered', reg))
      .catch(err => console.log('SW Register failed', err));
  }

  // 3. INSTALL PROMPT LOGIC
  let deferredPrompt;
  const installPrompt = document.getElementById('install-prompt');
  const installBtn = document.getElementById('install-btn');
  const closeInstall = document.getElementById('close-install');

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    // Tampilkan tombol install
    installPrompt.style.display = 'flex';
  });

  installBtn.addEventListener('click', async () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      console.log(`User choice: ${outcome}`);
      deferredPrompt = null;
      installPrompt.style.display = 'none';
    }
  });

  closeInstall.addEventListener('click', () => {
    installPrompt.style.display = 'none';
  });

  // 4. SHARE LOGIC (Web Share API vs Fallback)
  const shareBtn = document.getElementById('native-share');
  const pageUrl = window.location.href;
  const title = "Berita Mancing Terkini - Republik Mancing";

  if (navigator.share) {
    shareBtn.addEventListener('click', () => {
      navigator.share({
        title: title,
        text: 'Cek berita mancing seru ini!',
        url: pageUrl,
      }).catch(console.error);
    });
    // Sembunyikan fallback
    document.querySelector('.share-fallback').style.display = 'none';
  } else {
    // Sembunyikan tombol native, gunakan fallback
    shareBtn.style.display = 'none';
    document.getElementById('share-wa').href = `https://api.whatsapp.com/send?text=${title}%20${pageUrl}`;
    document.getElementById('share-fb').href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;
  }

  // Active Nav Link Logic
  const sections = document.querySelectorAll("section");
  const navLi = document.querySelectorAll("nav a");
  window.onscroll = () => {
    var current = "";
    sections.forEach((section) => {
      const sectionTop = section.offsetTop;
      if (scrollY >= sectionTop - 150) {
        current = section.getAttribute("id");
      }
    });
    navLi.forEach((a) => {
      a.classList.remove("active");
      if (a.getAttribute("href").includes(current)) {
        a.classList.add("active");
      }
    });
  };
</script>
</body>
</html>
